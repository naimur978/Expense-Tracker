{"ast":null,"code":"const API_BASE_URL = 'http://localhost:8001/api';\nexport const api = {\n  async getExpenses() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/expenses/`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => null);\n        throw new Error((errorData === null || errorData === void 0 ? void 0 : errorData.detail) || `HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      // Convert string amounts to numbers\n      return data.results.map(expense => ({\n        ...expense,\n        amount: Number(expense.amount)\n      }));\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n      throw error;\n    }\n  },\n  async createExpense(expense) {\n    // Format the amount as a string with 2 decimal places\n    const formattedExpense = {\n      ...expense,\n      amount: expense.amount.toFixed(2)\n      // Date is already in YYYY-MM-DD format from the form\n    };\n    const response = await fetch(`${API_BASE_URL}/expenses/`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formattedExpense)\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error((errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'Failed to create expense');\n    }\n    const data = await response.json();\n    // Convert amount to number when receiving response\n    return {\n      ...data,\n      amount: Number(data.amount)\n    };\n  },\n  async updateExpense(id, expense) {\n    // Format the amount as a string with 2 decimal places\n    const formattedExpense = {\n      ...expense,\n      amount: expense.amount.toFixed(2)\n      // Date is already in YYYY-MM-DD format from the form\n    };\n    const response = await fetch(`${API_BASE_URL}/expenses/${id}/`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formattedExpense)\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error((errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'Failed to update expense');\n    }\n    const data = await response.json();\n    // Convert amount to number when receiving response\n    return {\n      ...data,\n      amount: Number(data.amount)\n    };\n  },\n  async deleteExpense(id) {\n    const response = await fetch(`${API_BASE_URL}/expenses/${id}/`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error((errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'Failed to delete expense');\n    }\n  },\n  async getExpenseSummary(timeframe = 'monthly') {\n    const response = await fetch(`${API_BASE_URL}/expenses/summary/?timeframe=${timeframe}`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error((errorData === null || errorData === void 0 ? void 0 : errorData.detail) || 'Failed to fetch expense summary');\n    }\n    const data = await response.json();\n    // Convert amounts to numbers in summary data\n    return {\n      ...data,\n      category_totals: data.category_totals.map(item => ({\n        ...item,\n        total: Number(item.total)\n      })),\n      time_series: data.time_series.map(item => ({\n        ...item,\n        total: Number(item.total)\n      }))\n    };\n  }\n};","map":{"version":3,"names":["API_BASE_URL","api","getExpenses","response","fetch","headers","ok","errorData","json","catch","Error","detail","status","data","results","map","expense","amount","Number","error","console","createExpense","formattedExpense","toFixed","method","body","JSON","stringify","updateExpense","id","deleteExpense","getExpenseSummary","timeframe","category_totals","item","total","time_series"],"sources":["/Users/naimur/Downloads/Code/ExpenseTracker/frontend/src/services/api.ts"],"sourcesContent":["import { Expense } from '../types/expense';\n\nconst API_BASE_URL = 'http://localhost:8001/api';\n\nexport const api = {\n  async getExpenses() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/expenses/`, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => null);\n        throw new Error(errorData?.detail || `HTTP error! status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      // Convert string amounts to numbers\n      return data.results.map((expense: any) => ({\n        ...expense,\n        amount: Number(expense.amount)\n      }));\n    } catch (error) {\n      console.error('Error fetching expenses:', error);\n      throw error;\n    }\n  },\n\n  async createExpense(expense: Omit<Expense, 'id' | 'createdAt'>) {\n    // Format the amount as a string with 2 decimal places\n    const formattedExpense = {\n      ...expense,\n      amount: expense.amount.toFixed(2),\n      // Date is already in YYYY-MM-DD format from the form\n    };\n\n    const response = await fetch(`${API_BASE_URL}/expenses/`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(formattedExpense),\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error(errorData?.detail || 'Failed to create expense');\n    }\n    \n    const data = await response.json();\n    // Convert amount to number when receiving response\n    return {\n      ...data,\n      amount: Number(data.amount)\n    };\n  },\n\n  async updateExpense(id: string, expense: Omit<Expense, 'id' | 'createdAt'>) {\n    // Format the amount as a string with 2 decimal places\n    const formattedExpense = {\n      ...expense,\n      amount: expense.amount.toFixed(2),\n      // Date is already in YYYY-MM-DD format from the form\n    };\n\n    const response = await fetch(`${API_BASE_URL}/expenses/${id}/`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(formattedExpense),\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error(errorData?.detail || 'Failed to update expense');\n    }\n    \n    const data = await response.json();\n    // Convert amount to number when receiving response\n    return {\n      ...data,\n      amount: Number(data.amount)\n    };\n  },\n\n  async deleteExpense(id: string) {\n    const response = await fetch(`${API_BASE_URL}/expenses/${id}/`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error(errorData?.detail || 'Failed to delete expense');\n    }\n  },\n\n  async getExpenseSummary(timeframe: 'weekly' | 'monthly' | 'yearly' = 'monthly') {\n    const response = await fetch(`${API_BASE_URL}/expenses/summary/?timeframe=${timeframe}`, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n    });\n    \n    if (!response.ok) {\n      const errorData = await response.json().catch(() => null);\n      throw new Error(errorData?.detail || 'Failed to fetch expense summary');\n    }\n    \n    const data = await response.json();\n    // Convert amounts to numbers in summary data\n    return {\n      ...data,\n      category_totals: data.category_totals.map((item: any) => ({\n        ...item,\n        total: Number(item.total)\n      })),\n      time_series: data.time_series.map((item: any) => ({\n        ...item,\n        total: Number(item.total)\n      }))\n    };\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}